<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>EQUIPOS XXX</title>
</head>
<body>
  <h2>XXXXXXXXXX</h2>
  <table border="1">
    <thead>
      <tr>
        <th>Equipo</th>
        <th>Reparación</th>
        <th>Precio</th>
      </tr>
    </thead>
    <tbody id="equipos-body"></tbody>
  </table>

  <script>
    // Leer parámetros de la URL
    const params = new URLSearchParams(window.location.search);
    const equipmentsParam = params.get("equipments");

    if (equipmentsParam) {
      try {
        // Decodificar y parsear JSON
        const equipments = JSON.parse(decodeURIComponent(equipmentsParam));
        
        const tbody = document.getElementById("equipos-body");
        
        equipments.forEach(equip => {
          equip.repairs.forEach(repair => {
            const row = document.createElement("tr");

            const deviceCell = document.createElement("td");
            deviceCell.textContent = equip.device;
            row.appendChild(deviceCell);

            const repairCell = document.createElement("td");
            repairCell.textContent = repair.repairDetail;
            row.appendChild(repairCell);

            const priceCell = document.createElement("td");
            priceCell.textContent = repair.price;
            row.appendChild(priceCell);

            tbody.appendChild(row);
          });
        });

      } catch (error) {
        console.error("Error procesando los equipos:", error);
      }
    } else {
      document.getElementById("equipos-body").innerHTML = "<tr><td colspan='3'>No se enviaron equipos</td></tr>";
    }
  </script>
</body>
</html>
