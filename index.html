<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Equipos a Reparar</title>
</head>
<body>
  <h2>EEEEr</h2>
  <table border="1" cellpadding="5" cellspacing="0">
    <thead>
      <tr>
        <th>Equipo</th>
        <th>Reparaci√≥n</th>
        <th>Precio</th>
      </tr>
    </thead>
    <tbody id="equipments-table">
    </tbody>
  </table>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const equipmentsParam = urlParams.get('equipments');

    if (equipmentsParam) {
      try {
        const equipments = JSON.parse(decodeURIComponent(equipmentsParam));
        const tableBody = document.getElementById('equipments-table');

        equipments.forEach(equip => {
          equip.repairs.forEach(repair => {
            const row = document.createElement('tr');

            const deviceCell = document.createElement('td');
            deviceCell.textContent = equip.device || '';
            row.appendChild(deviceCell);

            const repairCell = document.createElement('td');
            repairCell.textContent = repair.repairDetail || '';
            row.appendChild(repairCell);

            const priceCell = document.createElement('td');
            priceCell.textContent = repair.price !== undefined ? repair.price : '';
            row.appendChild(priceCell);

            tableBody.appendChild(row);
          });
        });
      } catch (error) {
        console.error('Error al procesar equipos:', error);
      }
    }
  </script>
</body>
</html>
